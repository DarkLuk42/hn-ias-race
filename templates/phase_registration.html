@;for(i in context){if(context.hasOwnProperty(i)){eval("var "+i+" = "+JSON.stringify(context[i])+";");}}@

@var race = data;@

<h2>Anmeldungen zum Rennen #race.name#</h2>

<button class="uk-button" data-click="return">Zurück</button>
<button class="uk-button uk-button-primary" data-click="editRaceState" data-state="QUALIFIYNG">Anmeldephase schließen</button>

<h3>unangemeldete Fahrzeuge</h3>

<table class="uk-table">
    <tr>
        <th>Typ</th>
        <th>Marke</th>
        <th>Beschreibung</th>
        <th>Rennen (wenn angemeldet)</th>
        <th></th>
    </tr>
    @for r = 0; r < vehicles.length; r++@
        @var vehicle = vehicles[r];@
        @var v_race;@
        @if !(vehicle.race_id && (v_race = app.findRace(vehicle.race_id)))@
            <tr data-id="#vehicle.id#">
                <td>#vehicle.type#</td>
                <td>#vehicle.brand#</td>
                <td>#vehicle.description#</td>
                <td>
                    <button class="uk-button uk-button-primary uk-button-mini" data-click="registerVehicle">anmelden</button>
                </td>
                <td>
                    <button class="uk-button uk-button-primary uk-button-mini" data-click="editVehicle">bearbeiten</button>
                    <button class="uk-button uk-button-danger uk-button-mini" data-click="removeVehicle">löschen</button>
                </td>
            </tr>
        @endif@
    @endfor@
</table>

<hr>

<h3>angemeldete Fahrzeuge</h3>

<table class="uk-table">
    <tr>
        <th>Typ</th>
        <th>Marke</th>
        <th>Beschreibung</th>
        <th>Rennen (wenn angemeldet)</th>
        <th></th>
    </tr>
    @for r = 0; r < vehicles.length; r++@
        @var vehicle = vehicles[r];@
        @var v_race;@
        @if vehicle.race_id  == race.id@
            <tr data-id="#vehicle.id#">
                <td>#vehicle.type#</td>
                <td>#vehicle.brand#</td>
                <td>#vehicle.description#</td>
                <td>
                    #race.name#
                    @if race.state == 'REGISTRATION'@
                        <button class="uk-button uk-button-danger uk-button-mini" data-click="unregisterVehicle">abmelden</button>
                    @endif@
                </td>
                <td>
                    <button class="uk-button uk-button-primary uk-button-mini" data-click="editVehicle">bearbeiten</button>
                    <button class="uk-button uk-button-danger uk-button-mini" data-click="removeVehicle">löschen</button>
                </td>
            </tr>
        @endif@
    @endfor@
</table>

<button class="uk-button" data-click="return">Zurück</button>
<button class="uk-button uk-button-primary" data-click="editRaceState" data-state="QUALIFIYNG">Anmeldephase schließen</button>
